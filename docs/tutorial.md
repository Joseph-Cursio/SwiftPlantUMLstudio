# SwiftUMLBridge Tutorial

This tutorial walks you through generating a class diagram from a real Swift project step by step. By the end you will have a working diagram, a configuration file tuned to your project, and an understanding of how to iterate on the output.

---

## What You Will Build

You will generate a PlantUML class diagram from the SwiftUMLBridgeFramework source itself — a moderately sized package with classes, structs, protocols, enums, and extensions. The same steps apply to any Swift project.

---

## Prerequisites

- SwiftUMLBridge installed and on your `$PATH` (see [User Guide — Installation](user-guide.md#installation))
- The SwiftPlantUMLstudio project cloned locally

Verify everything is ready:

```bash
swiftumlbridge --version
# 0.1.0
```

---

## Step 1 — Run With No Configuration

Start with zero configuration to see what the tool produces by default.

```bash
cd /path/to/SwiftPlantUMLstudio/SwiftUMLBridge

swiftumlbridge classdiagram Sources/SwiftUMLBridgeFramework/ --output consoleOnly
```

You will see a block of PlantUML markup on the terminal, starting with `@startuml` and ending with `@enduml`. It will include every Swift type in the framework: classes, structs, protocols, and enums, with all their members.

Now open it in the browser:

```bash
swiftumlbridge classdiagram Sources/SwiftUMLBridgeFramework/
```

Your browser opens [planttext.com](https://www.planttext.com) with the diagram pre-loaded. It is likely busy — every internal type and member is shown. The next steps reduce the noise.

---

## Step 2 — Focus on Public API

The framework's public surface is smaller and more useful for documentation purposes. Restrict the diagram to `public` types and members.

```bash
swiftumlbridge classdiagram Sources/SwiftUMLBridgeFramework/ \
  --output consoleOnly
```

This still shows everything. To filter by access level you need a configuration file.

**Create `.swiftumlbridge.yml` in the package root:**

```bash
touch /path/to/SwiftPlantUMLstudio/SwiftUMLBridge/.swiftumlbridge.yml
```

Add these contents:

```yaml
elements:
  havingAccessLevel:
    - public
  showMembersWithAccessLevel:
    - public
  showMemberAccessLevelAttribute: true
```

Now run again from the package directory (so the tool finds the config file):

```bash
cd /path/to/SwiftPlantUMLstudio/SwiftUMLBridge

swiftumlbridge classdiagram Sources/SwiftUMLBridgeFramework/ --output consoleOnly
```

The output is now limited to `public` types (`ClassDiagramGenerator`, `Configuration`, `FileCollector`, etc.) and their `public` members.

---

## Step 3 — Clean Up Extensions

`ClassDiagramGenerator` and several other types have extensions. By default each extension is a separate node connected by a dependency arrow, which adds visual clutter. Merge extension members back into their parent types.

Update `.swiftumlbridge.yml`:

```yaml
elements:
  havingAccessLevel:
    - public
  showMembersWithAccessLevel:
    - public
  showMemberAccessLevelAttribute: true
  showExtensions: merged
```

Run and open in browser:

```bash
swiftumlbridge classdiagram Sources/SwiftUMLBridgeFramework/
```

The diagram is now flatter. Extension members appear inline under their parent type, and there are no extension-dependency arrows cluttering the layout.

---

## Step 4 — Suppress Common Protocol Conformances

The `Configuration`, `FileOptions`, and other types conform to `Codable`. That relationship arrow adds noise without adding information in a class-level overview. Exclude it.

```yaml
elements:
  havingAccessLevel:
    - public
  showMembersWithAccessLevel:
    - public
  showMemberAccessLevelAttribute: true
  showExtensions: merged

relationships:
  inheritance:
    exclude:
      - "Codable"
      - "Hashable"
      - "Equatable"
      - "Sendable"
  realize:
    exclude:
      - "Codable"
      - "Hashable"
      - "Equatable"
      - "Sendable"
```

Reload the diagram. The standard library protocol conformances are gone, leaving only the domain-level relationships.

---

## Step 5 — Add a Title and Theme

Make the diagram self-documenting with page text and a visual theme.

```yaml
elements:
  havingAccessLevel:
    - public
  showMembersWithAccessLevel:
    - public
  showMemberAccessLevelAttribute: true
  showExtensions: merged

relationships:
  inheritance:
    exclude:
      - "Codable"
      - "Hashable"
      - "Equatable"
      - "Sendable"
  realize:
    exclude:
      - "Codable"
      - "Hashable"
      - "Equatable"
      - "Sendable"

theme: minty

texts:
  title: "SwiftUMLBridgeFramework — Public API"
  footer: "Generated by swiftumlbridge 0.1.0"
```

Open the diagram:

```bash
swiftumlbridge classdiagram Sources/SwiftUMLBridgeFramework/
```

You should see a styled diagram with a title bar at the top and a footer.

> **Tip:** Browse available themes in the [Reference Guide — Themes](reference.md#themes). A `minty` theme gives a light pastel look; `hacker` gives a dark green-on-black terminal feel.

---

## Step 6 — Include Only Specific Files

Suppose you want a focused diagram of just the emitter types, without the parsing and model layers. Use `files.include` to restrict which files are parsed.

```yaml
files:
  include:
    - "Sources/SwiftUMLBridgeFramework/Emitters/**/*.swift"

elements:
  havingAccessLevel:
    - public
    - internal
  showMembersWithAccessLevel:
    - public
    - internal
  showMemberAccessLevelAttribute: true
  showExtensions: merged

texts:
  title: "Emitter Layer"
```

With `files.include` set, the positional path arguments are ignored — the glob patterns control which files are parsed.

```bash
swiftumlbridge classdiagram
```

The diagram now shows only the emitter types: `DiagramScript`, `DiagramText`, `ConsolePresenter`, `BrowserPresenter`, `DiagramPresenting`.

---

## Step 7 — Save the Diagram to a File

When you are happy with the output, save it for use in documentation or version control:

```bash
swiftumlbridge classdiagram Sources/SwiftUMLBridgeFramework/ \
  --output consoleOnly > docs/architecture.puml
```

To render it locally (requires Java and PlantUML):

```bash
java -jar plantuml.jar docs/architecture.puml
# Produces docs/architecture.png
```

To render it without a local PlantUML install, use the image-only browser output and save the opened PNG from your browser, or pipe the text to the [PlantText API](https://www.planttext.com/api/).

---

## Step 8 — Applying to Your Own Project

The same workflow applies to any Swift project:

1. **Navigate to your project root.**

2. **Run with no config to see the full output:**
   ```bash
   swiftumlbridge classdiagram Sources/
   ```

3. **Create `.swiftumlbridge.yml` and iterate:**
   - Start with `havingAccessLevel: [public]` to focus on the public surface.
   - Add `showExtensions: merged` to reduce clutter.
   - Add an `exclude` list under `files` or `elements` to skip generated code.
   - Tune `relationships.inheritance.exclude` to hide standard library conformances.

4. **Commit `.swiftumlbridge.yml` to version control** so every team member gets consistent diagrams.

5. **Add a Makefile or CI step** for automated diagram regeneration:
   ```makefile
   diagram:
       swiftumlbridge classdiagram Sources/ --output consoleOnly > docs/architecture.puml
   ```

---

## What's Next

- Read the [User Guide](user-guide.md) for full documentation of every flag and option.
- Read the [Reference Guide](reference.md) for the complete YAML schema, all themes, all element kinds, and all relationship style options.
- Check the [Known Limitations](user-guide.md#known-limitations) section for current M0 constraints (actor stereotypes, async/throws labeling).
